<form [formGroup]="createForm">
  <!--For Testing: {{ createForm.value | json }}-->

  <!--<hr>-->
  <h3>Cluster</h3>
  <div class="row">
    <mat-form-field>
      <input matInput placeholder="Cluster Name" formControlName="cluster_name" type="text">
      <mat-error *ngIf="f.cluster_name.invalid && f.cluster_name.touched">
        Name is too short or too long
      </mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-select placeholder="DBMS Type" formControlName="dbms_type" [errorStateMatcher]="matcher">
        <mat-option>Clear</mat-option>
        <mat-option *ngFor="let dbmsChoice of dbmsChoices" [value]="dbmsChoice">{{dbmsChoice}}</mat-option>
      </mat-select>
      <mat-error *ngIf="f.dbms_type.invalid">You must make a selection</mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-select placeholder="Environment" formControlName="environment" [errorStateMatcher]="matcher">
        <mat-option>Clear</mat-option>
        <mat-option *ngFor="let envChoice of envChoices" [value]="envChoice">{{envChoice}}</mat-option>
      </mat-select>
      <mat-error *ngIf="f.environment.invalid">You must make a selection</mat-error>
    </mat-form-field>

    <mat-form-field>
      <input matInput placeholder="Backup Retention Days" formControlName="backup_retention_days">
      <mat-error *ngIf="f.backup_retention_days.invalid">Days must be from 1-35</mat-error>
    </mat-form-field>

    <mat-checkbox
      class="mat-checkbox-layout"
      [checked]
      labelPosition="after" formControlName="tls_enabled_sw">
      TLS
    </mat-checkbox>
  </div>
  <h6>Requested Resources</h6>
  <div class="row">
    <mat-form-field>
      <input matInput placeholder="Requested CPUs" formControlName="requested_cpu" type="number">
      <mat-error *ngIf="f.requested_cpu.invalid">CPUs must be from 1-14</mat-error>
    </mat-form-field>

    <mat-form-field>
      <input matInput placeholder="Requested RAM (GB)" formControlName="requested_mem_gb" type="number">
      <mat-error *ngIf="f.requested_mem_gb.invalid">RAM must be from 2-36 GiB</mat-error>
    </mat-form-field>

    <mat-form-field>
      <input matInput placeholder="Requested DB (GB)" formControlName="requested_db_gb" type="number">
      <mat-error *ngIf="f.requested_db_gb.invalid">DB must be from 0-1024 GiB</mat-error>
    </mat-form-field>
  </div>
  <br>
  <div>
    <div class="row">
      <h3 class="col">Servers</h3>
      <div class="col-md-auto"></div>
      <button mat-button class="mat-raised-button justify-content-end col col-lg-2" color="primary" (click)="openDialog()">
        Add New Server
      </button>

    </div>
    <table class="table">
      <thead>
      <tr class="bg-clusters-header">
        <th scope="col">DataCenter</th>
        <th scope="col">Server Name</th>
        <th scope="col">Server IP</th>
        <th scope="col">CPU</th>
        <th scope="col">RAM (GB)</th>
        <th scope="col">DB GB</th>
        <th scope="col">Node Role</th>
      </tr>
      </thead>
      <tbody *ngFor="let s of serverFA.controls; let i = index;">
      <tr class="bg-clusters bg-hover">
        <td>{{ s.value.data_center }}</td>
        <td>{{ s.value.server_name }}</td>
        <td>{{ s.value.server_ip }}</td>
        <td>{{ s.value.cpu }}</td>
        <td>{{ s.value.mem_gb }}</td>
        <td>{{ s.value.db_gb }}</td>
        <td>{{ s.value.node_role }}</td>
      </tr>
      </tbody>
    </table>
  </div>


  <!--<div formArrayName="phones">-->
  <!--<div *ngFor="let phone of phones.controls; let i=index" [formGroupName]="i">-->
  <!--<mat-form-field>-->
  <!--<input matInput placeholder="area" formControlName="area">-->
  <!--</mat-form-field>-->
  <!--<mat-form-field>-->
  <!--<input matInput placeholder="prefix" formControlName="prefix">-->
  <!--</mat-form-field>-->
  <!--<mat-form-field>-->
  <!--<input matInput placeholder="line" formControlName="line">-->
  <!--</mat-form-field>-->
  <!--<button mat-raised-button color="warn" (click)="deletePhone(i)">Delete</button>-->
  <!--<br>-->
  <!--</div>-->

  <!--<button mat-raised-button color="primary" (click)="addPhone()">Add Phone Number</button>-->
  <button mat-raised-button [disabled]="createForm.invalid" color="primary">Let's do this!</button>
</form>
